<div class="row justify-content-center">
    <div class="col-12">
        <h2 id="bmf-complain-heading" jhiTranslate="whistleBlowerApp.complain.home.createOrEditLabel">Create or edit
            a Complain</h2>

        <div>
            <bmf-alert-error></bmf-alert-error>
        </div>
        <form [formGroup]="complainForm" (ngSubmit)="save()">
            <mat-horizontal-stepper [linear]="false" #stepper>
                <mat-step>
                    <ng-template matStepLabel>Complain Information</ng-template>
                    <div fxLayout="row">
                        <div fxFlex fxLayout="column">
                            <mat-form-field class="full-width" appearance="outline">
                                <mat-label>
                                    <span jhiTranslate="whistleBlowerApp.complain.category">Category</span>
                                </mat-label>
                                <mat-select formControlName="categoryId" placeholder="Select Category" required>
                                    <mat-option [value]="categoryOption.id"
                                        *ngFor="let categoryOption of categories; trackBy: trackById">
                                        {{ categoryOption.name }}
                                    </mat-option>
                                </mat-select>
                                <mat-error>
                                    <bmf-ngx-error [control]="complainForm.get('categoryId')" label="Category">
                                    </bmf-ngx-error>
                                </mat-error>
                            </mat-form-field>

                            <mat-form-field class="full-width" appearance="outline">
                                <mat-label>
                                    <span jhiTranslate="whistleBlowerApp.complain.description">Description</span>
                                </mat-label>
                                <textarea matInput rows="8" formControlName="description" required></textarea>
                                <mat-error>
                                    <bmf-ngx-error [control]="complainForm.get('description')" label="Description">
                                    </bmf-ngx-error>
                                </mat-error>
                            </mat-form-field>

                            <div fxLayout="row"
                                style="border: 1px solid rgba(0,0,0,.12); border-radius: 8px;; padding: .75em;">
                                <mat-list fxFlex>
                                    <div mat-subheader>
                                        <button (click)="openAttachementDialog()" color="primary" type="button" mat-button>
                                            <mat-icon color="primary" >add</mat-icon>
                                            <span>Add Attachment</span>
                                        </button>
                                    </div>
                                    <mat-list-item formArrayName="attachments" *ngFor="let s of attachments.controls; let i= index">
                                        <button type="button" mat-icon-button (click)="removeAttachment(i)">
                                            <mat-icon color="warn"  >delete</mat-icon>
                                        </button>
                                        <div mat-line>
                                            <a target="_blanck" [href]="downloadUrl+'/'+s.value?.contentId">{{s.value?.name || s.value?.contentId}}</a>
                                        </div>
                                        <div mat-line> Type: {{s.value?.mimeType}}</div>
                                      </mat-list-item>
                                    
                                </mat-list>
                            </div>
                        </div>

                    </div>

                    <div style="margin-top: 20px;">
                        <button type="button" color="primary" mat-raised-button matStepperNext>Next</button>
                    </div>
                </mat-step>
                <mat-step>
                    <ng-template matStepLabel>Personal Information</ng-template>
                    <div fxLayout="column">
                        <div fxLayout="row" fxLayoutGap="10px">
                            <mat-form-field fxFlex appearance="outline">
                                <mat-label>
                                    <span jhiTranslate="whistleBlowerApp.complain.name">Name</span>
                                </mat-label>
                                <input matInput type="text"  formControlName="name" />
                            </mat-form-field>
                            <mat-form-field fxFlex appearance="outline">
                                <mat-label>
                                    <span jhiTranslate="whistleBlowerApp.complain.position">Position</span>
                                </mat-label>
                                <input matInput type="text"  formControlName="position" />
                            </mat-form-field>
                            <mat-form-field fxFlex appearance="outline">
                                <mat-label>
                                    <span jhiTranslate="whistleBlowerApp.complain.organisation">Organisation</span>
                                </mat-label>
                                <input matInput type="text"  formControlName="organisation" />
                            </mat-form-field>
                        </div>
                        <div fxLayout="row" fxLayoutGap="10px">
                            <mat-form-field fxFlex appearance="outline">
                                <mat-label>
                                    <span jhiTranslate="whistleBlowerApp.complain.email">Email</span>
                                </mat-label>
                                <input matInput type="text" formControlName="email" />
                            </mat-form-field>
                            <mat-form-field fxFlex appearance="outline">
                                <mat-label>
                                    <span jhiTranslate="whistleBlowerApp.complain.phoneNumber">Phone Number</span>
                                </mat-label>
                                <input matInput type="text" formControlName="phoneNumber" />
                            </mat-form-field>
                        </div>

                    </div>
                    <div>
                        <button color="primary" type="button" mat-raised-button matStepperNext>Next</button>
                    </div>
                </mat-step>
                <mat-step>
                    <ng-template matStepLabel>Suspects</ng-template>
                    <button type="button" mat-button (click)="addSuspect()">Add</button>
                    <div formArrayName="suspects" *ngFor="let s of suspects.controls; let i= index">
                        <div [formGroupName]="i" fxLayout="row">
                            <div>
                                {{i+1}}
                            </div>
                            <div class="form-group">
                                <label class="form-control-label" jhiTranslate="whistleBlowerApp.complain.name"
                                    for="field_name">Name</label>
                                <input type="text" class="form-control" name="name" id="field_name"
                                    formControlName="name" />
                            </div>

                            <div class="form-group">
                                <label class="form-control-label" jhiTranslate="whistleBlowerApp.complain.position"
                                    for="field_position">Position</label>
                                <input type="text" class="form-control" name="position" id="field_position"
                                    formControlName="position" />
                            </div>

                            <div class="form-group">
                                <label class="form-control-label" jhiTranslate="whistleBlowerApp.complain.organisation"
                                    for="field_organisation">Organisation</label>
                                <input type="text" class="form-control" name="organisation" id="field_organisation"
                                    formControlName="organisation" />
                            </div>

                            <div class="form-group">
                                <label class="form-control-label" jhiTranslate="whistleBlowerApp.complain.email"
                                    for="field_email">Email</label>
                                <input type="text" class="form-control" name="email" id="field_email"
                                    formControlName="email" />
                            </div>

                            <div class="form-group">
                                <label class="form-control-label" jhiTranslate="whistleBlowerApp.complain.phoneNumber"
                                    for="field_phoneNumber">Phone Number</label>
                                <input type="text" class="form-control" name="phoneNumber" id="field_phoneNumber"
                                    formControlName="phoneNumber" />
                            </div>
                        </div>
                        <mat-divider></mat-divider>
                    </div>
                    <div>
                        <button type="button" mat-button matStepperNext>Next</button>
                    </div>
                </mat-step>
                <mat-step>
                    <ng-template matStepLabel>Witnesses</ng-template>
                    <button type="button" mat-raised-button (click)="addWitness()">Add Witness</button>
                    <div formArrayName="witnesses" *ngFor="let s of witnesses.controls; let i= index">
                        <div [formGroupName]="i" fxLayout="row">
                            <div>
                                {{i+1}}
                            </div>
                            <div class="form-group">
                                <label class="form-control-label" jhiTranslate="whistleBlowerApp.complain.name"
                                    for="field_name">Name</label>
                                <input type="text" class="form-control" name="name" id="field_name"
                                    formControlName="name" />
                            </div>

                            <div class="form-group">
                                <label class="form-control-label" jhiTranslate="whistleBlowerApp.complain.position"
                                    for="field_position">Position</label>
                                <input type="text" class="form-control" name="position" id="field_position"
                                    formControlName="position" />
                            </div>

                            <div class="form-group">
                                <label class="form-control-label" jhiTranslate="whistleBlowerApp.complain.organisation"
                                    for="field_organisation">Organisation</label>
                                <input type="text" class="form-control" name="organisation" id="field_organisation"
                                    formControlName="organisation" />
                            </div>

                            <div class="form-group">
                                <label class="form-control-label" jhiTranslate="whistleBlowerApp.complain.email"
                                    for="field_email">Email</label>
                                <input type="text" class="form-control" name="email" id="field_email"
                                    formControlName="email" />
                            </div>

                            <div class="form-group">
                                <label class="form-control-label" jhiTranslate="whistleBlowerApp.complain.phoneNumber"
                                    for="field_phoneNumber">Phone Number</label>
                                <input type="text" class="form-control" name="phoneNumber" id="field_phoneNumber"
                                    formControlName="phoneNumber" />
                            </div>
                        </div>
                    </div>
                    <div>
                        <button type="button" mat-button matStepperNext>Next</button>
                    </div>
                </mat-step>
                <mat-step>
                    <ng-template matStepLabel>Confirmation</ng-template>
                    <button type="submit" id="save-entity" [disabled]="complainForm.invalid || isSaving"
                        class="btn btn-primary">
                        <fa-icon icon="save"></fa-icon>&nbsp;<span jhiTranslate="entity.action.save">Save</span>
                    </button>
                </mat-step>
            </mat-horizontal-stepper>
        </form>
    </div>
</div>